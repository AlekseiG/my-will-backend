<!DOCTYPE html>
<!--/* @thymesVar id="requests" type="java.lang.Iterable<org.cryai.server.dao.UserRequest>" */-->
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Админ-панель CryAI</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-4">
    <h1 class="mb-4">Запросы пользователей</h1>

    <!-- Фильтры -->
    <form class="row g-3 mb-4" method="get" th:action="@{/admin/ui}">
        <div class="col-auto">
            <label for="chatIdFilter" class="visually-hidden">Chat ID</label>
            <input type="number" id="chatIdFilter" name="chatId" class="form-control" placeholder="Chat ID">
        </div>
        <div class="col-auto">
            <label for="userNameFilter" class="visually-hidden">Username</label>
            <input type="text" id="userNameFilter" name="userName" class="form-control" placeholder="Username">
        </div>
        <div class="col-auto">
            <button type="submit" class="btn btn-primary">Поиск</button>
            <a class="btn btn-secondary" th:href="@{/admin/ui}">Сброс</a>
        </div>
    </form>

    <!-- Таблица -->
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Chat ID</th>
                <th>User</th>
                <th>Full Name</th>
                <th>Текст запроса</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="req : ${requests}">
                <!--/* @thymesVar id="req" type="org.cryai.server.dao.UserRequest" */-->
                <td class="small text-muted" th:text="${req.id}">ID</td>
                <td th:text="${req.user.chatId}">000000</td>
                <td th:text="${req.user.userName ?: '—'}">User</td>
                <td th:text="${(req.user.firstName ?: '') + ' ' + (req.user.lastName ?: '')}">Имя Фамилия</td>
                <td th:text="${req.text}">Текст запроса</td>
                <td>
                    <form th:action="@{/admin/ui/delete/{id}(id=${req.id})}" method="post"
                          onsubmit="return confirm('Удалить этот запрос?');">
                        <button class="btn btn-danger btn-sm" type="submit">Удалить</button>
                    </form>
                </td>
            </tr>
            <tr th:if="${#lists.isEmpty(requests)}">
                <td class="text-center" colspan="5">Запросы не найдены</td>
            </tr>
        </tbody>
    </table>
</body>
</html>
